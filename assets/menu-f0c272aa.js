import{r as d,R as O}from"./index-76fb7be0.js";import{o as v,S as Q,D as F,y as T,u as V,X as E,I as _,l as A,h as H,a as X,b as m,g as $,_ as J,M as U,m as q,c as W}from"./use-is-mounted-d064fbb6.js";import{h as Y,c as z,d as P,p as G,n as Z,C as ee,r as te}from"./use-owner-cda28b73.js";import{F as re}from"./use-tree-walker-ba99393b.js";import{s as ne}from"./use-resolve-button-type-157dde21.js";function ae(e){throw new Error("Unexpected object: "+e)}var g=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(g||{});function ue(e,a){let r=a.resolveItems();if(r.length<=0)return null;let u=a.resolveActiveIndex(),i=u??-1,l=(()=>{switch(e.focus){case 0:return r.findIndex(n=>!a.resolveDisabled(n));case 1:{let n=r.slice().reverse().findIndex((t,s,f)=>i!==-1&&f.length-s-1>=i?!1:!a.resolveDisabled(t));return n===-1?n:r.length-1-n}case 2:return r.findIndex((n,t)=>t<=i?!1:!a.resolveDisabled(n));case 3:{let n=r.slice().reverse().findIndex(t=>!a.resolveDisabled(t));return n===-1?n:r.length-1-n}case 4:return r.findIndex(n=>a.resolveId(n)===e.id);case 5:return null;default:ae(e)}})();return l===-1?u:l}function B(e){return[e.screenX,e.screenY]}function ie(){let e=d.useRef([-1,-1]);return{wasMoved(a){let r=B(a);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(a){e.current=B(a)}}}let K=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function j(e){var a,r;let u=(a=e.innerText)!=null?a:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return u;let l=!1;for(let t of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))t.remove(),l=!0;let n=l?(r=i.innerText)!=null?r:"":u;return K.test(n)&&(n=n.replace(K,"")),n}function oe(e){let a=e.getAttribute("aria-label");if(typeof a=="string")return a.trim();let r=e.getAttribute("aria-labelledby");if(r){let u=r.split(" ").map(i=>{let l=document.getElementById(i);if(l){let n=l.getAttribute("aria-label");return typeof n=="string"?n.trim():j(l).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return j(e).trim()}function le(e){let a=d.useRef(""),r=d.useRef("");return v(()=>{let u=e.current;if(!u)return"";let i=u.innerText;if(a.current===i)return r.current;let l=oe(u).trim().toLowerCase();return a.current=i,r.current=l,l})}var se=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(se||{}),ce=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ce||{}),de=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(de||{});function C(e,a=r=>r){let r=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,u=W(a(e.items.slice()),l=>l.dataRef.current.domRef.current),i=r?u.indexOf(r):null;return i===-1&&(i=null),{items:u,activeItemIndex:i}}let me={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,a)=>{var r;let u=C(e),i=ue(a,{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:l=>l.id,resolveDisabled:l=>l.dataRef.current.disabled});return{...e,...u,searchQuery:"",activeItemIndex:i,activationTrigger:(r=a.trigger)!=null?r:1}},3:(e,a)=>{let r=e.searchQuery!==""?0:1,u=e.searchQuery+a.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(n=>{var t;return((t=n.dataRef.current.textValue)==null?void 0:t.startsWith(u))&&!n.dataRef.current.disabled}),l=i?e.items.indexOf(i):-1;return l===-1||l===e.activeItemIndex?{...e,searchQuery:u}:{...e,searchQuery:u,activeItemIndex:l,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,a)=>{let r=C(e,u=>[...u,{id:a.id,dataRef:a.dataRef}]);return{...e,...r}},6:(e,a)=>{let r=C(e,u=>{let i=u.findIndex(l=>l.id===a.id);return i!==-1&&u.splice(i,1),u});return{...e,...r,activationTrigger:1}}},L=d.createContext(null);L.displayName="MenuContext";function w(e){let a=d.useContext(L);if(a===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,w),r}return a}function fe(e,a){return V(a.type,me,e,a)}let pe=d.Fragment;function ve(e,a){let{__demoMode:r=!1,...u}=e,i=d.useReducer(fe,{__demoMode:r,menuState:r?0:1,buttonRef:d.createRef(),itemsRef:d.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsRef:n,buttonRef:t},s]=i,f=T(a);Y([t,n],(x,R)=>{var c;s({type:1}),H(R,X.Loose)||(x.preventDefault(),(c=t.current)==null||c.focus())},l===0);let b=v(()=>{s({type:1})}),y=d.useMemo(()=>({open:l===0,close:b}),[l,b]),I={ref:f};return O.createElement(L.Provider,{value:i},O.createElement(z,{value:V(l,{0:P.Open,1:P.Closed})},E({ourProps:I,theirProps:u,slot:y,defaultTag:pe,name:"Menu"})))}let Ie="button";function ge(e,a){var r;let u=_(),{id:i=`headlessui-menu-button-${u}`,...l}=e,[n,t]=w("Menu.Button"),s=T(n.buttonRef,a),f=G(),b=v(c=>{switch(c.key){case m.Space:case m.Enter:case m.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:g.First}));break;case m.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:g.Last}));break}}),y=v(c=>{switch(c.key){case m.Space:c.preventDefault();break}}),I=v(c=>{if(te(c.currentTarget))return c.preventDefault();e.disabled||(n.menuState===0?(t({type:1}),f.nextFrame(()=>{var h;return(h=n.buttonRef.current)==null?void 0:h.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),x=d.useMemo(()=>({open:n.menuState===0}),[n]),R={ref:s,id:i,type:ne(e,n.buttonRef),"aria-haspopup":"menu","aria-controls":(r=n.itemsRef.current)==null?void 0:r.id,"aria-expanded":n.menuState===0,onKeyDown:b,onKeyUp:y,onClick:I};return E({ourProps:R,theirProps:l,slot:x,defaultTag:Ie,name:"Menu.Button"})}let be="div",ye=Q.RenderStrategy|Q.Static;function xe(e,a){var r,u;let i=_(),{id:l=`headlessui-menu-items-${i}`,...n}=e,[t,s]=w("Menu.Items"),f=T(t.itemsRef,a),b=Z(t.itemsRef),y=G(),I=ee(),x=(()=>I!==null?(I&P.Open)===P.Open:t.menuState===0)();d.useEffect(()=>{let o=t.itemsRef.current;o&&t.menuState===0&&o!==(b==null?void 0:b.activeElement)&&o.focus({preventScroll:!0})},[t.menuState,t.itemsRef,b]),re({container:t.itemsRef.current,enabled:t.menuState===0,accept(o){return o.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}});let R=v(o=>{var D,M;switch(y.dispose(),o.key){case m.Space:if(t.searchQuery!=="")return o.preventDefault(),o.stopPropagation(),s({type:3,value:o.key});case m.Enter:if(o.preventDefault(),o.stopPropagation(),s({type:1}),t.activeItemIndex!==null){let{dataRef:p}=t.items[t.activeItemIndex];(M=(D=p.current)==null?void 0:D.domRef.current)==null||M.click()}q(t.buttonRef.current);break;case m.ArrowDown:return o.preventDefault(),o.stopPropagation(),s({type:2,focus:g.Next});case m.ArrowUp:return o.preventDefault(),o.stopPropagation(),s({type:2,focus:g.Previous});case m.Home:case m.PageUp:return o.preventDefault(),o.stopPropagation(),s({type:2,focus:g.First});case m.End:case m.PageDown:return o.preventDefault(),o.stopPropagation(),s({type:2,focus:g.Last});case m.Escape:o.preventDefault(),o.stopPropagation(),s({type:1}),$().nextFrame(()=>{var p;return(p=t.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})});break;case m.Tab:o.preventDefault(),o.stopPropagation(),s({type:1}),$().nextFrame(()=>{J(t.buttonRef.current,o.shiftKey?U.Previous:U.Next)});break;default:o.key.length===1&&(s({type:3,value:o.key}),y.setTimeout(()=>s({type:4}),350));break}}),c=v(o=>{switch(o.key){case m.Space:o.preventDefault();break}}),h=d.useMemo(()=>({open:t.menuState===0}),[t]),S={"aria-activedescendant":t.activeItemIndex===null||(r=t.items[t.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(u=t.buttonRef.current)==null?void 0:u.id,id:l,onKeyDown:R,onKeyUp:c,role:"menu",tabIndex:0,ref:f};return E({ourProps:S,theirProps:n,slot:h,defaultTag:be,features:ye,visible:x,name:"Menu.Items"})}let he=d.Fragment;function Re(e,a){let r=_(),{id:u=`headlessui-menu-item-${r}`,disabled:i=!1,...l}=e,[n,t]=w("Menu.Item"),s=n.activeItemIndex!==null?n.items[n.activeItemIndex].id===u:!1,f=d.useRef(null),b=T(a,f);A(()=>{if(n.__demoMode||n.menuState!==0||!s||n.activationTrigger===0)return;let p=$();return p.requestAnimationFrame(()=>{var k,N;(N=(k=f.current)==null?void 0:k.scrollIntoView)==null||N.call(k,{block:"nearest"})}),p.dispose},[n.__demoMode,f,s,n.menuState,n.activationTrigger,n.activeItemIndex]);let y=le(f),I=d.useRef({disabled:i,domRef:f,get textValue(){return y()}});A(()=>{I.current.disabled=i},[I,i]),A(()=>(t({type:5,id:u,dataRef:I}),()=>t({type:6,id:u})),[I,u]);let x=v(()=>{t({type:1})}),R=v(p=>{if(i)return p.preventDefault();t({type:1}),q(n.buttonRef.current)}),c=v(()=>{if(i)return t({type:2,focus:g.Nothing});t({type:2,focus:g.Specific,id:u})}),h=ie(),S=v(p=>h.update(p)),o=v(p=>{h.wasMoved(p)&&(i||s||t({type:2,focus:g.Specific,id:u,trigger:0}))}),D=v(p=>{h.wasMoved(p)&&(i||s&&t({type:2,focus:g.Nothing}))}),M=d.useMemo(()=>({active:s,disabled:i,close:x}),[s,i,x]);return E({ourProps:{id:u,ref:b,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,disabled:void 0,onClick:R,onFocus:c,onPointerEnter:S,onMouseEnter:S,onPointerMove:o,onMouseMove:o,onPointerLeave:D,onMouseLeave:D},theirProps:l,slot:M,defaultTag:he,name:"Menu.Item"})}let De=F(ve),Se=F(ge),Me=F(xe),Pe=F(Re),Ae=Object.assign(De,{Button:Se,Items:Me,Item:Pe});export{Ae as i};
