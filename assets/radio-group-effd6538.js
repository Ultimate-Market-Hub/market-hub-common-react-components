import{r as a,R as $}from"./index-c013ead5.js";import{D as V,I as X,o as y,y as q,R as ae,X as z,s as ie,l as le,u as ue,e as pe,b as k,O as K,M as I,N as j,c as se}from"./use-is-mounted-b8dc6585.js";import{c as de}from"./transition-a03fafff.js";import{M as ce,H as Q,T as me,e as fe,p as ve}from"./label-6040683b.js";import{b as Re,M as Y}from"./dialog-dfdaf664.js";import{F as be}from"./use-tree-walker-f069dc07.js";import{c as ge,p as Ee}from"./hidden-e72868fd.js";import{p as $e,r as J}from"./use-owner-3c26545a.js";var ye=(r=>(r[r.RegisterOption=0]="RegisterOption",r[r.UnregisterOption=1]="UnregisterOption",r))(ye||{});let he={0(r,t){let o=[...r.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...r,options:se(o,c=>c.element.current)}},1(r,t){let o=r.options.slice(),c=r.options.findIndex(m=>m.id===t.id);return c===-1?r:(o.splice(c,1),{...r,options:o})}},W=a.createContext(null);W.displayName="RadioGroupDataContext";function Z(r){let t=a.useContext(W);if(t===null){let o=new Error(`<${r} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Z),o}return t}let B=a.createContext(null);B.displayName="RadioGroupActionsContext";function ee(r){let t=a.useContext(B);if(t===null){let o=new Error(`<${r} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,ee),o}return t}function ke(r,t){return ue(t.type,he,r,t)}let Oe="div";function Te(r,t){let o=X(),{id:c=`headlessui-radiogroup-${o}`,value:m,defaultValue:v,form:P,name:A,onChange:h,by:O=(e,l)=>e===l,disabled:T=!1,...N}=r,R=y(typeof O=="string"?(e,l)=>{let i=O;return(e==null?void 0:e[i])===(l==null?void 0:l[i])}:O),[C,w]=a.useReducer(ke,{options:[]}),u=C.options,[M,_]=Q(),[b,x]=Y(),F=a.useRef(null),U=q(F,t),[p,D]=me(m,h,v),s=a.useMemo(()=>u.find(e=>!e.propsRef.current.disabled),[u]),g=a.useMemo(()=>u.some(e=>R(e.propsRef.current.value,p)),[u,p]),d=y(e=>{var l;if(T||R(e,p))return!1;let i=(l=u.find(E=>R(E.propsRef.current.value,e)))==null?void 0:l.propsRef.current;return i!=null&&i.disabled?!1:(D==null||D(e),!0)});be({container:F.current,accept(e){return e.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(e){e.setAttribute("role","none")}});let H=y(e=>{let l=F.current;if(!l)return;let i=pe(l),E=u.filter(n=>n.propsRef.current.disabled===!1).map(n=>n.element.current);switch(e.key){case k.Enter:ve(e.currentTarget);break;case k.ArrowLeft:case k.ArrowUp:if(e.preventDefault(),e.stopPropagation(),K(E,I.Previous|I.WrapAround)===j.Success){let n=u.find(G=>G.element.current===(i==null?void 0:i.activeElement));n&&d(n.propsRef.current.value)}break;case k.ArrowRight:case k.ArrowDown:if(e.preventDefault(),e.stopPropagation(),K(E,I.Next|I.WrapAround)===j.Success){let n=u.find(G=>G.element.current===(i==null?void 0:i.activeElement));n&&d(n.propsRef.current.value)}break;case k.Space:{e.preventDefault(),e.stopPropagation();let n=u.find(G=>G.element.current===(i==null?void 0:i.activeElement));n&&d(n.propsRef.current.value)}break}}),f=y(e=>(w({type:0,...e}),()=>w({type:1,id:e.id}))),L=a.useMemo(()=>({value:p,firstOption:s,containsCheckedOption:g,disabled:T,compare:R,...C}),[p,s,g,T,R,C]),re=a.useMemo(()=>({registerOption:f,change:d}),[f,d]),te={ref:U,id:c,role:"radiogroup","aria-labelledby":M,"aria-describedby":b,onKeyDown:H},oe=a.useMemo(()=>({value:p}),[p]),S=a.useRef(null),ne=$e();return a.useEffect(()=>{S.current&&v!==void 0&&ne.addEventListener(S.current,"reset",()=>{d(v)})},[S,d]),$.createElement(x,{name:"RadioGroup.Description"},$.createElement(_,{name:"RadioGroup.Label"},$.createElement(B.Provider,{value:re},$.createElement(W.Provider,{value:L},A!=null&&p!=null&&fe({[A]:p}).map(([e,l],i)=>$.createElement(ge,{features:Ee.Hidden,ref:i===0?E=>{var n;S.current=(n=E==null?void 0:E.closest("form"))!=null?n:null}:void 0,...ae({key:e,as:"input",type:"radio",checked:l!=null,hidden:!0,readOnly:!0,form:P,name:e,value:l})})),z({ourProps:te,theirProps:N,slot:oe,defaultTag:Oe,name:"RadioGroup"})))))}var Ce=(r=>(r[r.Empty=1]="Empty",r[r.Active=2]="Active",r))(Ce||{});let we="div";function xe(r,t){var o;let c=X(),{id:m=`headlessui-radiogroup-option-${c}`,value:v,disabled:P=!1,...A}=r,h=a.useRef(null),O=q(h,t),[T,N]=Q(),[R,C]=Y(),{addFlag:w,removeFlag:u,hasFlag:M}=de(1),_=ie({value:v,disabled:P}),b=Z("RadioGroup.Option"),x=ee("RadioGroup.Option");le(()=>x.registerOption({id:m,element:h,propsRef:_}),[m,x,h,r]);let F=y(f=>{var L;if(J(f.currentTarget))return f.preventDefault();x.change(v)&&(w(2),(L=h.current)==null||L.focus())}),U=y(f=>{if(J(f.currentTarget))return f.preventDefault();w(2)}),p=y(()=>u(2)),D=((o=b.firstOption)==null?void 0:o.id)===m,s=b.disabled||P,g=b.compare(b.value,v),d={ref:O,id:m,role:"radio","aria-checked":g?"true":"false","aria-labelledby":T,"aria-describedby":R,"aria-disabled":s?!0:void 0,tabIndex:(()=>s?-1:g||!b.containsCheckedOption&&D?0:-1)(),onClick:s?void 0:F,onFocus:s?void 0:U,onBlur:s?void 0:p},H=a.useMemo(()=>({checked:g,disabled:s,active:M(2)}),[g,s,M]);return $.createElement(C,{name:"RadioGroup.Description"},$.createElement(N,{name:"RadioGroup.Label"},z({ourProps:d,theirProps:A,slot:H,defaultTag:we,name:"RadioGroup.Option"})))}let Fe=V(Te),Ge=V(xe),_e=Object.assign(Fe,{Option:Ge,Label:ce,Description:Re});export{_e as y};
